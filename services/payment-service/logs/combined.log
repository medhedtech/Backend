{"level":"error","message":"Unexpected error:","metadata":{"environment":"development","error":{"status":"error","statusCode":500},"hostname":"Abhisheks-MacBook-Pro.local","method":"GET","path":"/api/v1/payments/create-order","service":"course-service","stack":"Error: Order not found\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/services/razorpay-service.ts:58:23\n    at Generator.next (<anonymous>)\n    at fulfilled (/Users/abhishekjha/Documents/backendts/services/payment-service/src/services/razorpay-service.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 17:42:33.802"}
{"level":"error","message":"Unexpected error:","metadata":{"environment":"development","error":{"status":"error","statusCode":500},"hostname":"Abhisheks-MacBook-Pro.local","method":"GET","path":"/api/v1/payments/create-order","service":"course-service","stack":"Error: Order not found\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/services/razorpay-service.ts:58:23\n    at Generator.next (<anonymous>)\n    at fulfilled (/Users/abhishekjha/Documents/backendts/services/payment-service/src/services/razorpay-service.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 17:42:40.539"}
{"level":"error","message":"Unexpected error:","metadata":{"environment":"development","error":{"status":"error","statusCode":500},"hostname":"Abhisheks-MacBook-Pro.local","method":"GET","path":"/api/v1/payments/create-order","service":"course-service","stack":"Error: Order not found\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/services/razorpay-service.ts:58:23\n    at Generator.next (<anonymous>)\n    at fulfilled (/Users/abhishekjha/Documents/backendts/services/payment-service/src/services/razorpay-service.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 17:44:09.043"}
{"level":"error","message":"Unexpected error:","metadata":{"environment":"development","error":{"status":"error","statusCode":500},"hostname":"Abhisheks-MacBook-Pro.local","method":"POST","path":"/api/v1/payments/create-order","service":"course-service","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:11:36\n    at Generator.next (<anonymous>)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:4:12)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:10:77\n    at /Users/abhishekjha/Documents/backendts/shared/utils/catchAsync.ts:5:21\n    at Layer.handle [as handle_request] (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/route.js:149:13)\n    at validateRequest (/Users/abhishekjha/Documents/backendts/services/payment-service/src/middleware/validation.ts:10:3)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 17:44:17.767"}
{"level":"error","message":"Unexpected error:","metadata":{"environment":"development","error":{"status":"error","statusCode":500},"hostname":"Abhisheks-MacBook-Pro.local","method":"POST","path":"/api/v1/payments/create-order","service":"course-service","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:11:36\n    at Generator.next (<anonymous>)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:4:12)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:10:77\n    at /Users/abhishekjha/Documents/backendts/shared/utils/catchAsync.ts:5:21\n    at Layer.handle [as handle_request] (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/route.js:149:13)\n    at validateRequest (/Users/abhishekjha/Documents/backendts/services/payment-service/src/middleware/validation.ts:10:3)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 17:44:18.922"}
{"level":"error","message":"Unexpected error:","metadata":{"environment":"development","error":{"status":"error","statusCode":500},"hostname":"Abhisheks-MacBook-Pro.local","method":"GET","path":"/api/v1/payments/orders","service":"course-service","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:41:36\n    at Generator.next (<anonymous>)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:4:12)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:40:79\n    at /Users/abhishekjha/Documents/backendts/shared/utils/catchAsync.ts:5:21\n    at Layer.handle [as handle_request] (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/route.js:149:13)\n    at authenticateToken (/Users/abhishekjha/Documents/backendts/shared/middleware/auth.ts:12:3)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 17:44:40.065"}
{"level":"error","message":"Unexpected error:","metadata":{"environment":"development","error":{"status":"error","statusCode":500},"hostname":"Abhisheks-MacBook-Pro.local","method":"GET","path":"/api/v1/payments/orders","service":"course-service","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:41:36\n    at Generator.next (<anonymous>)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:4:12)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:40:79\n    at /Users/abhishekjha/Documents/backendts/shared/utils/catchAsync.ts:5:21\n    at Layer.handle [as handle_request] (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/route.js:149:13)\n    at authenticateToken (/Users/abhishekjha/Documents/backendts/shared/middleware/auth.ts:12:3)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 17:44:41.478"}
{"level":"error","message":"Unexpected error:","metadata":{"environment":"development","error":{"body":"\n","expose":true,"status":400,"statusCode":400,"type":"entity.parse.failed"},"hostname":"Abhisheks-MacBook-Pro.local","method":"GET","path":"/api/v1/payments/orders","service":"course-service","stack":"SyntaxError: Unexpected end of JSON input\n    at JSON.parse (<anonymous>)\n    at createStrictSyntaxError (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/body-parser/lib/types/json.js:169:10)\n    at parse (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/body-parser/lib/types/json.js:86:15)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/raw-body/index.js:238:16)\n    at done (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at IncomingMessage.emit (node:domain:489:12)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 17:44:54.419"}
{"level":"error","message":"Unexpected error:","metadata":{"environment":"development","error":{"body":"\n","expose":true,"status":400,"statusCode":400,"type":"entity.parse.failed"},"hostname":"Abhisheks-MacBook-Pro.local","method":"POST","path":"/api/v1/payments/orders","service":"course-service","stack":"SyntaxError: Unexpected end of JSON input\n    at JSON.parse (<anonymous>)\n    at createStrictSyntaxError (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/body-parser/lib/types/json.js:169:10)\n    at parse (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/body-parser/lib/types/json.js:86:15)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/raw-body/index.js:238:16)\n    at done (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at IncomingMessage.emit (node:domain:489:12)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 17:44:58.641"}
{"level":"error","message":"Error details:","metadata":{"body":{},"environment":"development","error":{"body":"\n","expose":true,"status":400,"statusCode":400,"type":"entity.parse.failed"},"hostname":"Abhisheks-MacBook-Pro.local","method":"POST","params":{},"path":"/api/v1/payments/orders","query":{},"service":"course-service","stack":"SyntaxError: Unexpected end of JSON input\n    at JSON.parse (<anonymous>)\n    at createStrictSyntaxError (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/body-parser/lib/types/json.js:169:10)\n    at parse (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/body-parser/lib/types/json.js:86:15)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/raw-body/index.js:238:16)\n    at done (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at IncomingMessage.emit (node:domain:489:12)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 18:29:49.538"}
{"level":"error","message":"Error details:","metadata":{"body":{},"environment":"development","error":{"status":"error","statusCode":500},"hostname":"Abhisheks-MacBook-Pro.local","method":"GET","params":{},"path":"/api/v1/payments/orders","query":{},"service":"course-service","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:41:36\n    at Generator.next (<anonymous>)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:4:12)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:40:79\n    at /Users/abhishekjha/Documents/backendts/shared/utils/catchAsync.ts:5:21\n    at Layer.handle [as handle_request] (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/route.js:149:13)\n    at authenticateToken (/Users/abhishekjha/Documents/backendts/shared/middleware/auth.ts:12:3)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 18:34:47.074"}
{"level":"error","message":"Error details:","metadata":{"body":{},"environment":"development","error":{"status":"error","statusCode":500},"hostname":"Abhisheks-MacBook-Pro.local","method":"GET","params":{},"path":"/api/v1/payments/orders","query":{},"service":"course-service","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:41:36\n    at Generator.next (<anonymous>)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:4:12)\n    at /Users/abhishekjha/Documents/backendts/services/payment-service/src/controllers/payment-controller.ts:40:79\n    at /Users/abhishekjha/Documents/backendts/shared/utils/catchAsync.ts:5:21\n    at Layer.handle [as handle_request] (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/express/lib/router/route.js:149:13)\n    at authenticateToken (/Users/abhishekjha/Documents/backendts/shared/middleware/auth.ts:12:3)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 18:35:50.942"}
{"level":"error","message":"Error details:","metadata":{"body":{},"environment":"development","error":{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"anonymous\" (type string) at path \"user\" for model \"Order\"","name":"CastError","path":"user","reason":{},"stringValue":"\"anonymous\"","value":"anonymous","valueType":"string"},"hostname":"Abhisheks-MacBook-Pro.local","method":"GET","params":{},"path":"/api/v1/payments/orders","query":{},"service":"course-service","stack":"CastError: Cast to ObjectId failed for value \"anonymous\" (type string) at path \"user\" for model \"Order\"\n    at model.Query.exec (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/mongoose/lib/query.js:4921:21)\n    at model.Query.Query.then (/Users/abhishekjha/Documents/backendts/services/payment-service/node_modules/mongoose/lib/query.js:5020:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","user":"anonymous","version":"1.0.0"},"timestamp":"2025-05-15 18:36:35.657"}
